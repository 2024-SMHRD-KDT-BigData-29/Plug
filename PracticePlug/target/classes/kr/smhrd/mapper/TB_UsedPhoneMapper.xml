<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.smhrd.mapper.TB_UsedPhoneMapper">

    <!-- 상품 등록 -->
    <insert id="insertPhone" parameterType="kr.smhrd.entity.TB_UsedPhone">
        INSERT INTO tb_used_phone (seller_id, phone_mag1, brand, model, capacity, color, quality, price, deal_status, created_at)
        VALUES (#{seller_id}, #{phone_img1}, #{brand}, #{model}, #{capacity}, #{color}, #{quality}, #{price}, #{deal_status}, #{created_at})
    </insert>

    <!-- 거래중인 상품 목록 조회 -->
    <select id="getTradingItems" parameterType="string" resultType="kr.smhrd.entity.TB_UsedPhone">
        SELECT * FROM tb_used_phone WHERE seller_id = #{seller_id} AND deal_status = 'trading'
    </select>

    <!-- 거래완료 상품 목록 조회 -->
    <select id="getCompletedItems" parameterType="string" resultType="kr.smhrd.entity.TB_UsedPhone">
        SELECT * FROM tb_used_phone WHERE seller_id = #{seller_id} AND deal_status = 'completed'
    </select>

    <!-- 상품 정보 조회 -->
    <select id="getPhoneById" parameterType="int" resultType="kr.smhrd.entity.TB_UsedPhone">
        SELECT * FROM tb_used_phone WHERE phone_idx = #{phone_idx}
    </select>

    <!-- 상품 상태 업데이트 -->
    <update id="updatePhone" parameterType="kr.smhrd.entity.TB_UsedPhone">
        UPDATE tb_used_phone SET deal_status = #{status} WHERE phone_idx = #{phone_idx}
    </update>

    <!-- 상품 삭제 -->
    <delete id="deletePhone" parameterType="int">
        DELETE FROM tb_used_phone WHERE phone_idx = #{phone_idx}
    </delete>

</mapper>